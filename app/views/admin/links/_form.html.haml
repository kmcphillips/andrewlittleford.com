- content_for :js do
  :javascript
    function preview_link()
    {
      if(!$("#link_url").val().match(/^http(s)?:\/\/.+/))
        alert("URL must begin with 'http://' or 'https://'");
      else
        window.open($("#link_url").val());

      return false;
    }

= form_for [:admin, @link] do |f|
  = error_messages(@link)

  .field
    = f.label :title
    = f.text_field :title
  .field
    = f.label :url
    = f.text_field :url, :value => (f.object.url.blank? ? "http://" : f.object.url)
    = link_to_function(image_tag("/images/icons/link_preview.png", :alt => "Preview", :class => "no_border") + "Preview", "preview_link();", :title => "Preview")
  .field
    = f.label :description
    = f.text_area :description
    
  .actions
    %label Actions
    = f.submit 'Save'
